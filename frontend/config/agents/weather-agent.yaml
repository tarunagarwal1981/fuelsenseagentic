# Weather Agent Configuration
# Fetches marine weather and calculates fuel consumption impact

id: weather_agent
name: Weather Analyzer Agent
description: Fetches marine weather forecasts from Open-Meteo API, calculates weather-adjusted fuel consumption, and validates bunker port weather safety. Deterministic workflow - no LLM tool-calling.
type: specialist

domain:
  - weather_analysis
  - fuel_consumption
  - safety

capabilities:
  - fetch_marine_weather
  - calculate_weather_consumption
  - check_port_weather
  - assess_sea_state
  - generate_weather_alerts

intents:
  - check_weather
  - weather_forecast
  - calculate_consumption
  - check_port_safety
  - weather_impact

tools:
  required:
    - fetch_marine_weather
  optional:
    - calculate_weather_consumption
    - check_bunker_port_weather

dependencies:
  upstream:
    - route_agent
  downstream:
    - bunker_agent

execution:
  type: deterministic
  canRunInParallel: true
  maxExecutionTimeMs: 45000
  retryPolicy:
    maxRetries: 3
    backoffMs: 2000
  costPerCall: 0.00

produces:
  stateFields:
    - weather_forecast
    - weather_consumption
    - port_weather_status
  messageTypes:
    - weather_fetched
    - consumption_calculated
    - weather_error

consumes:
  required:
    - vessel_timeline
  optional:
    - bunker_ports
    - vessel_consumption
    - vessel_heading

validation:
  preExecution:
    - vessel_timeline_exists
  postExecution:
    - weather_forecast_received
    - consumption_calculated

enabled: true

metadata:
  version: "1.0.0"
  lastUpdated: "2025-01-24"
  maintainer: FuelSense Team
  documentation: docs/agents/weather-agent.md
