# Bunker Agent Configuration
# Finds optimal bunker ports and analyzes costs

id: bunker_agent
name: Bunker Planner Agent
description: Finds bunker ports along route, validates weather safety, fetches fuel prices, and analyzes optimal bunkering options with cost-benefit analysis. Deterministic workflow - executes workflow directly without LLM tool-calling.
type: specialist
dataPolicy: bunker

domain:
  - bunker_planning
  - cost_optimization
  - fuel_procurement

capabilities:
  - find_bunker_ports
  - fetch_fuel_prices
  - analyze_bunker_options
  - calculate_deviation_cost
  - rank_bunker_options
  - multi_port_planning
  - capacity_validation
  - rob_tracking

intents:
  - plan_bunker
  - find_fuel
  - cheapest_bunker
  - optimize_bunker
  - compare_ports
  - fuel_cost

tools:
  required: []
  optional: []

dependencies:
  upstream:
    - route_agent
    - weather_agent
  downstream:
    - finalize

execution:
  type: deterministic
  canRunInParallel: false
  maxExecutionTimeMs: 30000
  retryPolicy:
    maxRetries: 2
    backoffMs: 1000
  costPerCall: 0.00

produces:
  stateFields:
    - bunker_ports
    - port_prices
    - bunker_analysis
    - multi_bunker_analysis
    - recommended_port
    - bunker_quantities
    - total_bunker_cost
    - rob_tracking_data
  messageTypes:
    - bunker_analyzed
    - ports_found
    - bunker_error

consumes:
  required:
    - route_data
  optional:
    - weather_consumption
    - compliance_data
    - port_weather_status
    - fuel_quantity
    - fuel_types
    - current_rob
    - vessel_profile

validation:
  preExecution:
    - route_data_exists
  postExecution:
    - bunker_ports_found
    - quantities_fit_capacity
    - rob_never_negative
    - safety_margin_adequate

humanApproval:
  required: true
  threshold:
    field: total_bunker_cost
    operator: ">"
    value: 500000

enabled: true

metadata:
  version: "1.0.0"
  lastUpdated: "2025-01-24"
  maintainer: FuelSense Team
  documentation: docs/agents/bunker-agent.md
