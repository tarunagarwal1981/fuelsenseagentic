# Route Agent Configuration
# Calculates optimal maritime routes between ports

id: route_agent
name: Route Calculator Agent
description: >
  Calculates optimal maritime routes between ports. Accepts port names in natural
  language and internally resolves them to UN/LOCODE codes and coordinates using
  the WorldPortIndex database. Returns route with waypoints, distance, and vessel
  timeline. No port pre-processing required - handles all port resolution internally.
type: specialist

domain:
  - route_planning
  - voyage_planning
  - navigation

capabilities:
  - calculate_route
  - estimate_distance
  - generate_waypoints
  - calculate_weather_timeline
  - estimate_travel_time
  - identify_eca_zones
  - port_name_resolution
  - coordinate_extraction

intents:
  - plan_route
  - calculate_distance
  - find_waypoints
  - how_far
  - how_long

tools:
  required:
    - calculate_route
  optional:
    - calculate_weather_timeline

dependencies:
  upstream:
    - supervisor
  downstream:
    - compliance_agent
    - weather_agent
    - bunker_agent

execution:
  type: deterministic
  canRunInParallel: false
  maxExecutionTimeMs: 30000
  retryPolicy:
    maxRetries: 3
    backoffMs: 1000
  costPerCall: 0.00

produces:
  stateFields:
    - route_data
    - vessel_timeline
    - waypoints
    - total_distance
    - eca_zones
    - resolved_ports
  messageTypes:
    - route_calculated
    - route_error

consumes:
  required:
    - messages   # We can parse port names from natural language in message content
  optional:
    - origin_port_name
    - destination_port_name
    - origin_port_code
    - destination_port_code
    - vessel_speed
    - departure_date

validation:
  preExecution:
    - port_names_valid
    - origin_destination_different
  postExecution:
    - route_calculated_successfully
    - distance_positive
    - waypoints_generated

enabled: true

metadata:
  version: "2.0.0"
  lastUpdated: "2025-02-08"
  maintainer: FuelSense Team
  documentation: docs/agents/route-agent.md
  internal_capabilities:
    - "Accepts port names in natural language (e.g., 'Singapore', 'Fujairah')"
    - "Uses WorldPortIndex (Pub150) for port resolution"
    - "Converts port names to UN/LOCODE codes and coordinates"
    - "Calls SeaRoute API with validated coordinates"
    - "No external port resolution required from supervisor"
