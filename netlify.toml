# Netlify Configuration for FuelSense 360
# This configures Netlify to build from the frontend folder

[build]
  # Set base directory to frontend folder
  # IMPORTANT: Make sure the 'frontend' folder is committed to your git repository
  base = "frontend"
  # Build command (runs from frontend directory)
  command = "cd frontend && npm install && npm run build"
  # Publish directory (Next.js output)
  publish = "frontend/.next"

# Next.js plugin for optimal Next.js deployment
[[plugins]]
  package = "@netlify/plugin-nextjs"

# Build environment variables
[build.environment]
  NODE_VERSION = "20"
  # Next.js specific
  NEXT_TELEMETRY_DISABLED = "1"

# Branch Deploy Configuration
# Configure different branches for dev and production
# In Netlify Dashboard:
# 1. Go to Site settings → Build & deploy → Continuous Deployment
# 2. Enable "Deploy only the production branch" (uncheck this)
# 3. Set Production branch: main
# 4. Set Branch deploys: All branches (or specific: dev, main)
#
# For custom domains:
# 1. Go to Site settings → Domain management
# 2. Add custom domain for production (main branch)
# 3. Add subdomain for dev branch (e.g., dev.yourdomain.com)
# 4. In Branch deploys settings, assign dev subdomain to dev branch

# Context-specific settings (optional - only if you need different configs per branch)
# [context.production]
#   command = "cd frontend && npm install && npm run build"
#
# [context.branch-deploy]
#   command = "cd frontend && npm install && npm run build"

# Environment variables to set in Netlify Dashboard:
# Required:
# - ANTHROPIC_API_KEY (your Anthropic API key - for Bunker/Finalize agents)
# Optional (Recommended for cost savings):
# - OPENAI_API_KEY (your OpenAI API key - enables GPT-4o-mini for Route/Weather agents, ~85% cost reduction)
# Optional:
# - LANGCHAIN_API_KEY (for LangSmith monitoring)
# - LANGCHAIN_TRACING_V2=true
# - LANGCHAIN_PROJECT=fuelsense-360
# - LLM_MODEL (defaults to claude-haiku-4-5-20251001, only used as fallback)

# API Routes Configuration
# All API routes are automatically handled by Next.js
# Available endpoints:
# - /api/chat (legacy single-agent)
# - /api/chat-langgraph (single-agent LangGraph)
# - /api/chat-multi-agent (multi-agent system) [NEW]
# - /api/test-* (testing endpoints, can be disabled in production)

